// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native"]
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id       String @id @default(cuid())
  username String @unique
}

model Thumbnail {
  id           String     @id @default(cuid())
  url          String
  width        Int
  height       Int
  conclusion   Conclusion @relation(fields: [conclusionId], references: [id], onDelete: Cascade)
  conclusionId String     @unique
}

model Segment {
  id           String      @id @default(cuid())
  content      String      @db.Text
  time         String
  order        Int
  conclusion   Conclusion? @relation(fields: [conclusionId], references: [id], onDelete: Cascade)
  conclusionId String?

  @@index([conclusionId])
}

model Conclusion {
  id             String     @id @default(cuid())
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt
  url            String     @unique
  title          String
  timesConcluded Int        @default(0)
  segments       Segment[]
  thumbnail      Thumbnail?
}
